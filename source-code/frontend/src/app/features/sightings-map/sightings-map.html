<div class="w-100 h-100 d-flex overflow-hidden">

  <!-- Map + Toggle button -->
  <div class="position-relative flex-grow-1">
    <app-leaflet-map
      [isPanelOpen]="isPanelOpen()" 
      [isPickingCoordinates]="isPickingCoordinates()"
      [previewCoordinates]="prefilledCoordinates()"
      (coordinatesPicked)="onCoordinatesSelected($event)"
      (addSightingRequested)="onCoordinatesSelected($event)" />

    <app-toggle-button 
      [isPanelOpen]="isPanelOpen()"
      (toggleButtonClick)="togglePanel()" />
  </div>

  <!-- Side Panel -->
  <div class="panel-wrapper flex-shrink-0 overflow-hidden" [class.is-open]="isPanelOpen()" [style.--panel-width]="sidePanelWidth">
    <app-sightings-side-panel 
      [isPanelOpen]="isPanelOpen()"
      [width]="sidePanelWidth"
      [isPickingCoordinates]="isPickingCoordinates()"
      [(prefilledCoordinates)]="prefilledCoordinates"
      (closePanel)="onClosePanel()"
      (startPickingCoordinates)="onStartPickingCoordinates()"
      (stopPickingCoordinates)="onStopPickingCoordinates()" />
  </div>

</div>